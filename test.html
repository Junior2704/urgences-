<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test Email API</title>
</head>
<body>
  <h1>Test Envoi Email</h1>
  <button id="testBtn">Envoyer mail</button>

  <script>
document.getElementById("testBtn").addEventListener("click", async () => {
  try {
    console.log("üì® D√©but de l'envoi du mail...");

    // Appel √† l'API
    const res = await fetch("https://mail-km8qshonl-louis-projects-44a0ae73.vercel.app/api/send-email", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        key: "10876",
        template: "CR",
        to: "louisdabadie9@gmail.com",
        variables: {
          patient_nom: "Dupont",
          patient_prenom: "Jean",
          lien_compte_rendu: "https://exemple.com/monpdf"
        }
      })
    });

    console.log("‚è≥ Requ√™te envoy√©e, attente de la r√©ponse...");

    // Lecture de la r√©ponse
    if (!res.ok) {
      const text = await res.text();
      console.error("‚ùå Erreur HTTP :", res.status, text);
      return;
    }

    const data = await res.json();
    console.log("‚úÖ R√©ponse re√ßue :", data);

    alert("‚úÖ Mail envoy√© ! V√©rifie ta bo√Æte de r√©ception.");

  } catch (err) {
    console.error("‚ùå Erreur lors de l'envoi du mail :", err);
  }
});

  </script>
</body>
</html>
